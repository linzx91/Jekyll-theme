{% if site.data.site.lang == null or site.data.site.lang == "" %}
{% assign lang = site.data.lang.en-US %}
{% else %}
{% assign lang = site.data.lang[site.data.site.lang] %}
{% endif %}
<style>
#load-gitalk {
	height:40px;
	line-height:40px;
	color:#616161;
	font-size:1.125em;
	font-weight:500
}
.not-open-comment {
	width:100%;
	height:32px;
	line-height:32px;
	color:#9e9e9e;
	text-align:center;
	font-size:0.875em;
	font-weight:500
}
</style>
{% if page.key %}
<button id="load-gitalk" class="mdui-btn mdui-btn-block mdui-ripple">{{lang.post.load_gitalk_comments}}</button>
<div id="gitalk-container">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
</div>
<script>
$('#gitalk-container').before('<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.css?v=' + new Date().getTime() + '">');
$(document).ready(function() {
    $('#load-gitalk').on('click', function() {
        $('#gitalk-container').css('padding','0 16px 8px 16px');
        var url = '//cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.min.js';
        $.getScript(url, function() {
            var gitalk = new Gitalk({
                clientID: '{{site.data.site.comment.gitalk_clientID}}',
                clientSecret: '{{site.data.site.comment.gitalk_clientSecret}}',
                repo: '{{site.data.site.comment.gitalk_repo}}',
                owner: '{{site.data.site.comment.gitalk_owner}}',
                admin: ['{{site.data.site.comment.gitalk_admin}}'],
                id: '{{ page.key }}',
                distractionFreeMode: false
            });
            gitalk.render('gitalk-container');
        });
        $('#load-gitalk').fadeOut('slow', function() {
            $(this).remove();
        });
    });
});
</script>
{% else %}
<div class="not-open-comment">{{lang.post.not_open_comment}}</div>
{% endif %}